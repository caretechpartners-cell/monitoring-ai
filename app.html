<script>
  console.log("===== DEBUG START =====");

  console.log("localStorage keys:", Object.keys(localStorage));

  const rawUser = localStorage.getItem("user");
  console.log("raw user:", rawUser);

  let user = null;

  try {
    user = JSON.parse(rawUser);
  } catch (e) {
    console.log("JSON parse error:", e);
  }

  console.log("parsed user:", user);

  if (!user) {
    console.log("❌ user が null なので login.html に移動します");
    window.location.href = "login.html";
  } else {
    console.log("✅ user 読み取り OK、ページを継続");
  }

  // ログアウト処理
  function logout() {
    localStorage.removeItem("user");
    localStorage.removeItem("auth_token");
    window.location.href = "login.html";
  }
</script>
