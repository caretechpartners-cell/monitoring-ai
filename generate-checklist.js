// ================================
// å®Ÿåœ°æŒ‡å°ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆAI
// generate-checklist.js
// ================================

const ANSWER_LABEL = {
  yes: "ã¯ã„",
  no: "ã„ã„ãˆ",
  unknown: "ã‚ã‹ã‚‰ãªã„"
};

window.CHECKLIST_QUESTIONS = [
  {
    section: "ç¬¬27æ¡ã®2ï¼ˆè™å¾…é˜²æ­¢ï¼‰",
    critical: true,

    judgment: {
      red: {
        threshold: 2,
        summary: "è™å¾…é˜²æ­¢ã¯å®Ÿåœ°æŒ‡å°ã§æœ€ã‚‚é‡ç‚¹çš„ã«ç¢ºèªã•ã‚Œã¾ã™ã€‚æœªæ•´å‚™é …ç›®ã¯å¿…ãšäº‹å‰ã«æ˜¯æ­£ã—ã¦ãã ã•ã„ã€‚"
      },
      yellow: {
        threshold: 1,
        summary: "è™å¾…é˜²æ­¢ä½“åˆ¶ã«ä¸€éƒ¨ç¢ºèªä¸è¶³ãŒã‚ã‚Šã¾ã™ã€‚æŒ‡é‡ãƒ»ç ”ä¿®ãƒ»å§”å“¡ä¼šã®è¨˜éŒ²ã‚’æ•´ç†ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚"
      },
      green: {
        summary: "è™å¾…é˜²æ­¢ä½“åˆ¶ã¯æ¦‚ã­æ•´å‚™ã•ã‚Œã¦ã„ã¾ã™ã€‚"
      }
    },

    questions: [
      {
        id: "abuse_policy",
        text: "è™å¾…é˜²æ­¢ã®ãŸã‚ã®æŒ‡é‡ã‚’æ–‡æ›¸ã§æ•´å‚™ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ æŒ‡é‡ãŒæ•´å‚™ã•ã‚Œã¦ã„ã‚Œã°æ¦‚ã­å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚æœ€çµ‚æ”¹è¨‚æ—¥ã¨äº‹æ¥­æ‰€åã®è¨˜è¼‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚",
          no: "ğŸ”´ æŒ‡é‡ã®æœªæ•´å‚™ã¯é‡å¤§ãªæŒ‡æ‘˜ã«ã¤ãªãŒã‚Šã¾ã™ã€‚äº‹æ¥­æ‰€åãƒ»è²¬ä»»è€…ãƒ»å¯¾å¿œæ‰‹é †ã‚’æ˜è¨˜ã—ãŸæ–‡æ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚",
          unknown: "ğŸŸ¡ æŒ‡é‡ã®æœ‰ç„¡ã‚’è‡³æ€¥ç¢ºèªã—ã¦ãã ã•ã„ã€‚å®Ÿåœ°æŒ‡å°ã§ã¯å³æ™‚æç¤ºã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚"
        },
        documents: [
          "è™å¾…é˜²æ­¢ã®ãŸã‚ã®æŒ‡é‡",
          "æœ€çµ‚æ”¹è¨‚æ—¥ãŒåˆ†ã‹ã‚‹è¨˜éŒ²"
        ]
      },
      {
        id: "abuse_training",
        text: "è™å¾…é˜²æ­¢ã«é–¢ã™ã‚‹ç ”ä¿®ã‚’å®šæœŸçš„ã«å®Ÿæ–½ã—ã€è¨˜éŒ²ã‚’æ®‹ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ ç ”ä¿®å®Ÿæ–½ã¨è¨˜éŒ²ãŒç¢ºèªã§ãã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚",
          no: "ğŸ”´ ç ”ä¿®æœªå®Ÿæ–½ãƒ»è¨˜éŒ²ãªã—ã¯é«˜ç¢ºç‡ã§æŒ‡æ‘˜ã•ã‚Œã¾ã™ã€‚æ—¥æ™‚ãƒ»å‚åŠ è€…ãƒ»å†…å®¹ã‚’è¨˜éŒ²ã—ã¦ãã ã•ã„ã€‚",
          unknown: "ğŸŸ¡ ç ”ä¿®è¨˜éŒ²ã®æœ‰ç„¡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚å£é ­å®Ÿæ–½ã®ã¿ã§ã¯ä¸ååˆ†ã§ã™ã€‚"
        },
        documents: [
          "è™å¾…é˜²æ­¢ç ”ä¿®ã®å®Ÿæ–½è¨˜éŒ²",
          "ç ”ä¿®è³‡æ–™"
        ]
      },
      {
        id: "abuse_committee",
        text: "è™å¾…é˜²æ­¢ã®ãŸã‚ã®å§”å“¡ä¼šã‚’è¨­ç½®ã—ã€å®šæœŸçš„ã«é–‹å‚¬ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ å§”å“¡ä¼šã®è¨­ç½®ãƒ»é–‹å‚¬å®Ÿç¸¾ãŒç¢ºèªã§ãã‚Œã°æ¦‚ã­è‰¯å¥½ã§ã™ã€‚",
          no: "ğŸ”´ å§”å“¡ä¼šæœªè¨­ç½®ãƒ»æœªé–‹å‚¬ã¯é‡ç‚¹æŒ‡æ‘˜äº‹é …ã§ã™ã€‚è­°äº‹éŒ²ã‚’æ•´å‚™ã—ã¦ãã ã•ã„ã€‚",
          unknown: "ğŸŸ¡ å§”å“¡ä¼šã®é–‹å‚¬çŠ¶æ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚åç§°ãŒç•°ãªã£ã¦ã‚‚è¨˜éŒ²ãŒå¿…è¦ã§ã™ã€‚"
        },
        documents: [
          "è™å¾…é˜²æ­¢å§”å“¡ä¼šã®è­°äº‹éŒ²"
        ]
      },
      {
        id: "abuse_manager",
        text: "è™å¾…é˜²æ­¢ã®æ‹…å½“è€…ã‚’å®šã‚ã€å½¹å‰²ã‚’æ˜ç¢ºã«ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ æ‹…å½“è€…ãŒæ˜ç¢ºã§ã‚ã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚",
          no: "ğŸ”´ æ‹…å½“è€…æœªè¨­å®šã¯æŒ‡æ‘˜å¯¾è±¡ã§ã™ã€‚æ–‡æ›¸ã§æ˜ç¢ºã«ã—ã¦ãã ã•ã„ã€‚",
          unknown: "ğŸŸ¡ æŒ‡é‡ã‚„é‹å–¶è¦ç¨‹å†…ã®è¨˜è¼‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
        },
        documents: [
          "è™å¾…é˜²æ­¢æ‹…å½“è€…ã®é¸ä»»è¨˜éŒ²"
        ]
      }
    ]
  },

  {
    section: "ç¬¬4æ¡ï¼ˆå†…å®¹åŠã³æ‰‹ç¶šã®èª¬æ˜ãƒ»åŒæ„ï¼‰",
    critical: false,

    judgment: {
      red: {
        threshold: 2,
        summary: "é‡è¦äº‹é …èª¬æ˜ã‚„åŒæ„ã«ä¸å‚™ãŒã‚ã‚‹å ´åˆã€å®Ÿåœ°æŒ‡å°ã§å¿…ãšæŒ‡æ‘˜ã•ã‚Œã¾ã™ã€‚ç½²åãƒ»èª¬æ˜è¨˜éŒ²ã‚’é‡ç‚¹çš„ã«ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
      },
      yellow: {
        threshold: 1,
        summary: "èª¬æ˜ãƒ»åŒæ„ã®è¨˜éŒ²ã«ä¸€éƒ¨ä¸å®‰ãŒã‚ã‚Šã¾ã™ã€‚å¥‘ç´„æ™‚æ›¸é¡ã®æ•´åˆæ€§ã‚’ç¢ºèªã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚"
      },
      green: {
        summary: "é‡è¦äº‹é …èª¬æ˜ãŠã‚ˆã³åŒæ„ã¯é©åˆ‡ã«è¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚"
      }
    },

    questions: [
      {
        id: "04_policy",
        text: "é‡è¦äº‹é …èª¬æ˜æ›¸ã‚’äº¤ä»˜ã—ã€åˆ©ç”¨è€…ã¾ãŸã¯å®¶æ—ã¸èª¬æ˜ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ èª¬æ˜ãƒ»äº¤ä»˜ãŒç¢ºèªã§ãã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚",
          no: "ğŸ”´ èª¬æ˜ãƒ»äº¤ä»˜ãªã—ã¯æŒ‡æ‘˜å¯¾è±¡ã§ã™ã€‚åˆå›å¥‘ç´„æ™‚ã®å¯¾å¿œã‚’è¦‹ç›´ã—ã¦ãã ã•ã„ã€‚",
          unknown: "ğŸŸ¡ èª¬æ˜æ›¸ã®æ§ãˆã‚„ç½²åã®æœ‰ç„¡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
        },
        documents: ["é‡è¦äº‹é …èª¬æ˜æ›¸ï¼ˆç½²åä»˜ãï¼‰"]
      },
      {
        id: "04_consent",
        text: "èª¬æ˜å†…å®¹ã«ã¤ã„ã¦ã€æ–‡æ›¸ã§åŒæ„ã‚’å¾—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ æ–‡æ›¸åŒæ„ãŒã‚ã‚Œã°å®‰å¿ƒã§ã™ã€‚",
          no: "ğŸ”´ å£é ­åŒæ„ã®ã¿ã¯ä¸ååˆ†ã§ã™ã€‚ç½²åæ¬„ã‚’è¨­ã‘ã¦ãã ã•ã„ã€‚",
          unknown: "ğŸŸ¡ å¥‘ç´„æ›¸ãƒ»åŒæ„æ›¸ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
        },
        documents: ["åˆ©ç”¨å¥‘ç´„æ›¸", "åŒæ„æ›¸"]
      }
    ]
  },

  {
    section: "ç¬¬13æ¡ï¼ˆæŒ‡å®šå±…å®…ä»‹è­·æ”¯æ´ã®å…·ä½“çš„å–æ‰±æ–¹é‡ï¼‰",
    critical: false,

    judgment: {
      red: {
        threshold: 2,
        summary: "ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã‚„ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã®æœªå®Ÿæ–½ãƒ»æœªè¨˜éŒ²ã¯é‡ç‚¹æŒ‡æ‘˜äº‹é …ã§ã™ã€‚å®Ÿå‹™è¨˜éŒ²ã‚’æ—©æ€¥ã«è¦‹ç›´ã—ã¦ãã ã•ã„ã€‚"
      },
      yellow: {
        threshold: 1,
        summary: "æ”¯æ´çµŒéã‚„ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã®è¨˜éŒ²ã«ä¸€éƒ¨ä¸è¶³ãŒã‚ã‚Šã¾ã™ã€‚è¨˜éŒ²å†…å®¹ã‚’æ•´ç†ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚"
      },
      green: {
        summary: "å±…å®…ä»‹è­·æ”¯æ´ã®å®Ÿå‹™ã¯é©åˆ‡ã«è¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚"
      }
    },

    questions: [
      {
        id: "13_assessment",
        text: "åˆ©ç”¨è€…å®…ã‚’è¨ªå•ã—ã€é¢æ¥ã«ã‚ˆã‚‹ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã‚’è¡Œã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ è¨ªå•ãƒ»é¢æ¥è¨˜éŒ²ãŒã‚ã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚",
          no: "ğŸ”´ è¨ªå•ãªã—ã®ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆã¯æŒ‡æ‘˜ã•ã‚Œã‚„ã™ã„ç‚¹ã§ã™ã€‚",
          unknown: "ğŸŸ¡ æ”¯æ´çµŒéè¨˜éŒ²ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
        },
        documents: ["ã‚¢ã‚»ã‚¹ãƒ¡ãƒ³ãƒˆè¨˜éŒ²"]
      },
      {
        id: "13_monitoring",
        text: "æœˆ1å›ä»¥ä¸Šã®ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’è¡Œã„ã€è¨˜éŒ²ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ å®šæœŸçš„ãªè¨˜éŒ²ãŒã‚ã‚Œã°å®‰å¿ƒã§ã™ã€‚",
          no: "ğŸ”´ æœªå®Ÿæ–½ãƒ»æœªè¨˜éŒ²ã¯é‡ç‚¹æŒ‡æ‘˜äº‹é …ã§ã™ã€‚",
          unknown: "ğŸŸ¡ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°è¨˜éŒ²ã®æœ‰ç„¡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
        },
        documents: ["ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°è¨˜éŒ²"]
      }
    ]
  },

  {
    section: "ç¬¬18æ¡ï¼ˆé‹å–¶è¦ç¨‹ï¼‰",
    critical: false,

    judgment: {
      red: {
        threshold: 2,
        summary: "é‹å–¶è¦ç¨‹ã®æœªæ•´å‚™ã‚„å†…å®¹ä¸ä¸€è‡´ã¯å¿…ãšæŒ‡æ‘˜ã•ã‚Œã¾ã™ã€‚æ—©æ€¥ã«ç¾çŠ¶ã«åˆã‚ã›ã¦ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚"
      },
      yellow: {
        threshold: 1,
        summary: "é‹å–¶è¦ç¨‹ã®æ›´æ–°çŠ¶æ³ã«ä¸€éƒ¨ä¸å®‰ãŒã‚ã‚Šã¾ã™ã€‚æœ€çµ‚æ”¹è¨‚æ—¥ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
      },
      green: {
        summary: "é‹å–¶è¦ç¨‹ã¯ç¾è¡Œä½“åˆ¶ã«æ²¿ã£ã¦æ•´å‚™ã•ã‚Œã¦ã„ã¾ã™ã€‚"
      }
    },

    questions: [
      {
        id: "18_exists",
        text: "é‹å–¶è¦ç¨‹ã‚’æ•´å‚™ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ é‹å–¶è¦ç¨‹ãŒæ•´å‚™ã•ã‚Œã¦ã„ã‚Œã°å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚",
          no: "ğŸ”´ æœªæ•´å‚™ã¯å¿…ãšæŒ‡æ‘˜ã•ã‚Œã¾ã™ã€‚æ—©æ€¥ã«ä½œæˆã—ã¦ãã ã•ã„ã€‚",
          unknown: "ğŸŸ¡ ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ‰ç„¡ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
        },
        documents: ["é‹å–¶è¦ç¨‹"]
      },
      {
        id: "18_update",
        text: "é‹å–¶è¦ç¨‹ã¯æœ€æ–°ã®æ³•ä»¤ãƒ»ä½“åˆ¶ã«åˆã£ã¦ã„ã¾ã™ã‹ï¼Ÿ",
        feedback: {
          yes: "ğŸŸ¢ æ›´æ–°æ—¥ãŒæ–°ã—ã‘ã‚Œã°å®‰å¿ƒã§ã™ã€‚",
          no: "ğŸ”´ å¤ã„å†…å®¹ã®ã¾ã¾ã§ã¯æŒ‡æ‘˜ã•ã‚Œã‚„ã™ã„ã§ã™ã€‚",
          unknown: "ğŸŸ¡ æœ€çµ‚æ”¹è¨‚æ—¥ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"
        },
        documents: ["é‹å–¶è¦ç¨‹ï¼ˆæ”¹è¨‚å±¥æ­´ï¼‰"]
      }
    ]
  },

  {
    section: "ãã®ä»–ã®ç¢ºèªäº‹é …ï¼ˆå½¢å¼ãƒ»ä½“åˆ¶ï¼‰",
    level: "C",
    bulk: true,
    critical: false,

    judgment: {
      red: {
        threshold: 3,
        summary: "è¤‡æ•°ã®å½¢å¼çš„è¦ä»¶ã«æœªç¢ºèªäº‹é …ãŒã‚ã‚Šã¾ã™ã€‚å®Ÿåœ°æŒ‡å°ã§ã¯ã¾ã¨ã‚ã¦æŒ‡æ‘˜ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚"
      },
      yellow: {
        threshold: 1,
        summary: "ä¸€éƒ¨ã®å½¢å¼çš„è¦ä»¶ã«ç¢ºèªä¸è¶³ãŒã‚ã‚Šã¾ã™ã€‚"
      },
      green: {
        summary: "å½¢å¼çš„ãªä½“åˆ¶ãƒ»æ›¸é¡ã¯æ¦‚ã­æ•´å‚™ã•ã‚Œã¦ã„ã¾ã™ã€‚"
      }
    },

    questions: [
  {
    id: "c_staffing",
    text: "å¾“æ¥­è€…ã®å“¡æ•°ã¯åŸºæº–ã‚’æº€ãŸã—ã€å¿…è¦ãªè³‡æ ¼ã‚’æœ‰ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆç¬¬2æ¡ï¼‰",
    documents: ["å‹¤å‹™ä½“åˆ¶ä¸€è¦§è¡¨", "è³‡æ ¼è¨¼ã®å†™ã—"]
  },
  {
    id: "c_manager",
    text: "ç®¡ç†è€…ã¯å¸¸å‹¤å°‚å¾“ã€ã¾ãŸã¯é©åˆ‡ãªå…¼å‹™ä½“åˆ¶ã¨ãªã£ã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆç¬¬3æ¡ï¼‰",
    documents: ["ç®¡ç†è€…ã®é›‡ç”¨å½¢æ…‹è³‡æ–™", "å‹¤å‹™ä½“åˆ¶è¡¨"]
  },
  {
    id: "c_qualification",
    text: "è¢«ä¿é™ºè€…è³‡æ ¼ãƒ»è¦ä»‹è­·èªå®šã®æœ‰ç„¡ã‚„æœ‰åŠ¹æœŸé™ã‚’ç¢ºèªã—ã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆç¬¬7æ¡ï¼‰",
    documents: ["ä»‹è­·ä¿é™ºè³‡æ ¼ç¢ºèªè¨˜éŒ²"]
  },
  {
    id: "c_work_system",
    text: "äº‹æ¥­æ‰€ã®å¾“æ¥­è€…ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹æä¾›ä½“åˆ¶ã‚’ç¢ºä¿ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆç¬¬19æ¡ï¼‰",
    documents: ["å‹¤å‹™ä½“åˆ¶è¡¨", "å‹¤å‹™å®Ÿç¸¾è¡¨"]
  },
  {
    id: "c_bcp",
    text: "æ„ŸæŸ“ç—‡ãƒ»ç½å®³æ™‚ã®æ¥­å‹™ç¶™ç¶šè¨ˆç”»ï¼ˆBCPï¼‰ã‚’ç­–å®šã—ã€ç ”ä¿®ãƒ»è¨“ç·´ã‚’å®Ÿæ–½ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆç¬¬19æ¡ã®2ï¼‰",
    documents: ["æ¥­å‹™ç¶™ç¶šè¨ˆç”»", "ç ”ä¿®ãƒ»è¨“ç·´è¨˜éŒ²"]
  },
  {
    id: "c_infection",
    text: "æ„ŸæŸ“ç—‡ã®äºˆé˜²ãƒ»ã¾ã‚“å»¶é˜²æ­¢ã®ãŸã‚ã®å§”å“¡ä¼šã€æŒ‡é‡ã€ç ”ä¿®ã‚’å®Ÿæ–½ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆç¬¬21æ¡ã®2ï¼‰",
    documents: ["æ„ŸæŸ“ç—‡å¯¾ç­–æŒ‡é‡", "å§”å“¡ä¼šè­°äº‹éŒ²", "ç ”ä¿®è¨˜éŒ²"]
  },
  {
    id: "c_privacy",
    text: "å€‹äººæƒ…å ±ã®åˆ©ç”¨ã«ã¤ã„ã¦åŒæ„ã‚’å¾—ã¦ãŠã‚Šã€è·å“¡ã®ç§˜å¯†ä¿æŒã‚’å¾¹åº•ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆç¬¬23æ¡ï¼‰",
    documents: ["å€‹äººæƒ…å ±åŒæ„æ›¸", "ç§˜å¯†ä¿æŒèª“ç´„æ›¸"]
  },
  {
    id: "c_advertising",
    text: "åºƒå‘Šå†…å®¹ã¯è™šå½ã‚„èª‡å¤§ãªè¡¨ç¾ã¨ãªã£ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿï¼ˆç¬¬24æ¡ï¼‰",
    documents: ["ãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆ", "Webåºƒå‘Š"]
  },
  {
    id: "c_complaint",
    text: "è‹¦æƒ…ã‚’å—ã‘ä»˜ã‘ãŸå ´åˆã€å†…å®¹ã‚„å¯¾å¿œã‚’è¨˜éŒ²ã—ã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆç¬¬26æ¡ï¼‰",
    documents: ["è‹¦æƒ…å—ä»˜ç°¿", "è‹¦æƒ…å¯¾å¿œè¨˜éŒ²"]
  },
  {
    id: "c_accident",
    text: "äº‹æ•…ç™ºç”Ÿæ™‚ã®é€£çµ¡ãƒ»å¯¾å¿œãƒ»è¨˜éŒ²ãƒ»è³ å„Ÿã‚’é©åˆ‡ã«è¡Œã£ã¦ã„ã¾ã™ã‹ï¼Ÿï¼ˆç¬¬27æ¡ï¼‰",
    documents: ["äº‹æ•…å¯¾å¿œè¨˜éŒ²", "é€£çµ¡è¨˜éŒ²"]
  }
]


  }
];

// ================================
// åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
// ================================

function evaluateSection(section, answers) {
  let riskCount = 0;

  const questions = section.questions.map(q => {
    const ans = answers[q.id] || (section.bulk ? "no" : "unknown");

    if (ans === "no") riskCount += 2;
    if (ans === "unknown") riskCount += 1;

    return {
      text: q.text,
      answer: ans,
      feedback: q.feedback ? q.feedback[ans] : "",
      documents: q.documents || []
    };
  });

  const j = section.judgment;

  let riskLevel = "ğŸŸ¢ æ¦‚ã­è‰¯å¥½";
  let summary = j.green.summary;

  if (riskCount >= j.red.threshold) {
    riskLevel = section.critical ? "ğŸ”´ è¦æ³¨æ„ï¼ˆé‡ç‚¹ç¢ºèªï¼‰" : "ğŸ”´ è¦æ³¨æ„";
    summary = j.red.summary;
  } else if (riskCount >= j.yellow.threshold) {
    riskLevel = "ğŸŸ¡ è¦ç¢ºèª";
    summary = j.yellow.summary;
  }

  return { riskLevel, summary, questions };
}

function renderSectionResult(sectionIndex, result) {
  const el = document.getElementById(`result-${sectionIndex}`);
  if (!el) return;

  // â–¼ ãƒã‚§ãƒƒã‚¯æ•°é›†è¨ˆ
  let checkedCount = 0;
  let uncheckedCount = 0;

  result.questions.forEach(q => {
    if (q.answer === "yes") checkedCount++;
    if (q.answer === "no") uncheckedCount++;
  });

  // â–¼ æœªãƒã‚§ãƒƒã‚¯é …ç›®æŠ½å‡º
  const uncheckedQuestions = result.questions.filter(
    q => q.answer === "no"
  );

  // â–¼ å…ˆé ­ã‚µãƒãƒªãƒ¼
  el.innerHTML = `
    <div style="margin-bottom:10px;font-weight:bold;">
      âœ” ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ï¼š${checkedCount}é …ç›®ã€€
      âš  æœªãƒã‚§ãƒƒã‚¯ï¼š${uncheckedCount}é …ç›®
    </div>
  `;

  // â–¼ æœªãƒã‚§ãƒƒã‚¯é …ç›®ä¸€è¦§ï¼ˆCã¾ã¨ã‚å°‚ç”¨ï¼‰
  if (uncheckedQuestions.length > 0) {
    el.innerHTML += `
      <div style="background:#fff3f3;border-radius:10px;padding:12px;margin-bottom:12px;">
        <strong>ã€æœªãƒã‚§ãƒƒã‚¯é …ç›®ï¼ˆè¦å¯¾å¿œï¼‰ã€‘</strong>
        <ul style="margin-top:8px;">
          ${uncheckedQuestions
            .map(q => `<li>${q.text}</li>`)
            .join("")}
        </ul>
      </div>
    `;
  }

  // â–¼ åˆ¤å®šè¡¨ç¤º
  el.innerHTML += `
    <strong>åˆ¤å®šï¼š</strong>${result.riskLevel}<br>
    <div style="margin:6px 0;">${result.summary}</div>
    <hr>
  `;

  // â–¼ å„è³ªå•ã®è©³ç´°ï¼ˆå¾“æ¥ã©ãŠã‚Šï¼‰
  result.questions.forEach(q => {
    el.innerHTML += `
      <div style="margin-bottom:12px;">
        <div><strong>Qï¼š</strong>${q.text}</div>
        <div style="margin-left:1em;">
          <strong>å›ç­”ï¼š</strong>${ANSWER_LABEL[q.answer] || "æœªå›ç­”"}
        </div>
        ${
          q.documents.length
            ? `<div style="font-size:14px;color:#555;">
                ğŸ“„ ${q.documents.join("ã€")}
               </div>`
            : ""
        }
      </div>
    `;
  });
}
